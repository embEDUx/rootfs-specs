---
global:
    use:
        +: "vim-syntax systemd"
        -: "X doc consolekit"

packages:
    sys-apps/util-linux:
        use:
            -: "systemd"
    virtual/udev:
        kw:
            +: "~arm"
    sys-apps/systemd:
        kw:
            +: "~arm"
        use: 
            +: "importd gcrypt curl lz4 lzma"
    app-portage/layman: {}
    app-portage/eix: {}
    app-editors/vim: {}
    app-portage/genlop: {}
    net-misc/ntp: {}
    sys-apps/iproute2: {}
    net-analyzer/netcat: {}
    net-wireless/iw: {}
    sys-fs/btrfs-progs: {}
    sys-apps/usbutils: {}
    sys-apps/usbmon: {}
    dev-util/sysdig: {}
        kw:
            +: "~arm"
    sci-libs/gsl:
        use:
            +: "cblas-external"
    net-wireless/gnuradio:
        use:
            +: "alsa analog audio channels ctrlport digital fec filter log pager performance-counters utils vocoder wavelet zeromq" 
            -: "qt4"
    net-wireless/gr-osmosdr:
        use:
            +: "rtlsdr hackrf fcd" 
    net-wireless/rtl-sdr: {}

pre_install_commands:
    - "wget http://moe.in.htwg-konstanz.de:8010/linux/qemu-virt-arm/latest.config -O /usr/src/linux/.config"
    - "pushd /usr/src/linux; make olddefconfig; make modules_prepare; popd;"
    - "emerge --sync"
    - "chown -R portage:portage /usr/portage"
    - "emerge -1uvkb perl"
    - "perl-cleaner --reallyall -- -kb"


post_install_commands:
    - "echo Europe/Berlin > /etc/timezone"
    - "emerge --config timezone-data"
    - "mv /sbin/init /sbin/init-openrc"
    - "ln -sf /usr/lib/systemd/systemd /sbin/init"
    - "tar -C /usr/ -cjf /usr/portage.tbz2 portage"
    - "rm -Rf /usr/portage/*"

